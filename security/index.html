
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://kainctl.github.io/isd/security/">
      
      
        <link rel="prev" href="../roadmap/">
      
      
        <link rel="next" href="../media/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Security - isd</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../assets/external/fonts.googleapis.com/css.bd2ff1a2.css">
        <style>:root{--md-text-font:"Atkinson Hyperlegible";--md-code-font:"Noto Sans Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra_fonts.css">
    
      <link rel="stylesheet" href="../stylesheets/asciinema-player.css">
    
      <link rel="stylesheet" href="../stylesheets/custom-asciinema-player.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Security - isd" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://kainctl.github.io/isd/assets/images/social/security.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://kainctl.github.io/isd/security/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Security - isd" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://kainctl.github.io/isd/assets/images/social/security.png" >
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#security" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="isd" class="md-header__button md-logo" aria-label="isd" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            isd
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Security
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/kainctl/isd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="isd" class="md-nav__button md-logo" aria-label="isd" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    isd
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kainctl/isd" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../customization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Customization
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Roadmap
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#shell-injection" class="md-nav__link">
    <span class="md-ellipsis">
      Shell Injection
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trust" class="md-nav__link">
    <span class="md-ellipsis">
      Trust
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#privileged-execution-sudo" class="md-nav__link">
    <span class="md-ellipsis">
      Privileged Execution (sudo)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#issues-with-systemctl-edit" class="md-nav__link">
    <span class="md-ellipsis">
      Issues with systemctl edit
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Issues with systemctl edit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systemctl-edit---stdin" class="md-nav__link">
    <span class="md-ellipsis">
      systemctl edit --stdin
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pagers" class="md-nav__link">
    <span class="md-ellipsis">
      Pagers
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../media/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Media
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="security">Security<a class="headerlink" href="#security" title="Permanent link">&para;</a></h1>
<p>This page tries to provide some background information for security conscious-users
and interested readers.
On a high-level <code>isd</code> is nothing more than a fancy <em><abbr title="Terminal User Interface">TUI</abbr>/wrapper</em> around
<code>systemctl</code>. I hope this explains everything. Thanks! See you around! <img alt="üëã" class="twemoji" src="../assets/external/cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f44b.svg" title=":wave:"></p>
<p>Wait, you want <em>more details</em>? Wow...
I never thought that anybody <em>really</em> wanted to know. <img alt="üòç" class="twemoji" src="../assets/external/cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f60d.svg" title=":heart_eyes:">
So let's get lost in details üî¨!</p>
<h2 id="shell-injection">Shell Injection<a class="headerlink" href="#shell-injection" title="Permanent link">&para;</a></h2>
<p>As mentioned above, <code>isd</code> wraps around <code>systemctl</code> calls.
<code>systemctl</code> is executed as a sub-process via the Python
<a href="https://docs.python.org/3/library/subprocess.html">subprocess</a> module.
In this context, the important question is whether or not
<a href="https://en.wikipedia.org/wiki/Code_injection#Shell_injection">shell injection</a> attacks are possible.</p>
<p><code>isd</code> relies on the implementation of Python <a href="https://docs.python.org/3/library/subprocess.html">subprocess</a>
to correctly escape arguments and to prevent <a href="https://en.wikipedia.org/wiki/Code_injection#Shell_injection">shell injection</a> attacks.
If you would like to learn more about, I would recommend reading the
<a href="https://docs.python.org/3/library/subprocess.html#security-considerations">Security Considerations</a>
section from the <a href="https://docs.python.org/3/library/subprocess.html">subprocess</a> documentation.
The important part is that <code>isd</code> <em>always</em> uses <code>shell=False</code> and let's the battle-tested
Python standard library take care of the <em>scary</em> part.</p>
<p>For completeness, <code>isd</code> also calls <a href="https://docs.python.org/3/library/asyncio-subprocess.html#asyncio.create_subprocess_exec"><code>asyncio.create_subprocess_exec</code></a>
to create and interact with Python <a href="https://docs.python.org/3/library/asyncio-subprocess.html#asyncio.subprocess.Process"><code>Process</code></a>
instances in an asynchronous fashion, but internally, the same escaping is handled by the
Python standard library.</p>
<p>Though, what <em>actually</em> happens in the background is always something to scrutinize.</p>
<h2 id="trust">Trust<a class="headerlink" href="#trust" title="Permanent link">&para;</a></h2>
<p>At the end of the day, it is your call which software you trust.
The source of <code>isd</code> is publicly available to increase your trust into the application.
Not only that but the software is build via a <em>fully reproducible</em> pipeline
with <a href="https://nixos.org/guides/how-nix-works/">nix</a>!
This means that nobody has to use/trust the build artifacts but everybody can
build their own artifact via <code>nix build</code> and create an <em>identical</em> version.</p>
<p>But even if you trust <code>isd</code><sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>, it does <em>not</em> mean that there are no risks
this library introduces or that it cannot further improve!</p>
<h2 id="privileged-execution-sudo">Privileged Execution (<code>sudo</code>)<a class="headerlink" href="#privileged-execution-sudo" title="Permanent link">&para;</a></h2>
<p>In general, it is a good idea to never run commands/binaries with elevated privileges.
<code>isd</code> is designed in such a way that you never have to run it with <code>sudo</code>.
<code>isd</code> is able to automatically prefix the <code>systemctl</code> subprocess calls with <code>sudo</code>
if necessary and may ask you for your password via
the <em>normal</em> terminal password prompt.</p>
<!-- FUTURE: Add an example of an "hijacked" config.yaml file and
show that a file wouldn't be removed! -->

<p>But note that <code>isd</code> can also take advantage of <code>polkit</code> and does <em>not</em>
have to rely on <code>sudo</code> to interact with <code>system</code> units<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>.
See the <code>polkit</code> settings page to see how to configure <code>polkit</code>
to let an <em>unprivileged</em> user manage specific <code>system</code> units.</p>
<p>The only exception is the <code>systemctl edit</code> command.</p>
<h2 id="issues-with-systemctl-edit">Issues with <code>systemctl edit</code><a class="headerlink" href="#issues-with-systemctl-edit" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Opinionated Section</p>
<p>The following section contains <em>my personal</em> opinion
about design decisions regarding <code>systemctl edit</code>.
Nothing more and nothing less. I am still a <em>big fan</em>
of systemd. Otherwise, why would I have spend sooo much time
creating a <abbr title="Terminal User Interface">TUI</abbr> for it?</p>
</div>
<p>IMHO, <code>systemctl edit</code> is a bit of an odd ü¶Ü as it is orthogonal to
other <code>systemctl</code> commands.
To cite the <code>systemctl</code> man page:</p>
<blockquote>
<p>systemctl - Control the systemd system and service manager</p>
</blockquote>
<p>Now, is <code>systemctl edit</code> something that <em>controls</em> a service manager?
If you ask me, no! <code>systemctl edit</code> does <em>much more/too much</em>.</p>
<p>Before diving into the well-meant criticism,
let's start by highlighting the positive ‚òÄÔ∏è.
I am a big fan of <code>systemctl edit</code><sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup> and think that it is one of the most
useful utilities when working with <code>systemd</code>.
It makes it a lot easier to debug and improve the security of units.
And if it would have been called <code>systemd-edit-unit</code> or something similar,
I would have <em>almost no</em><sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup> complaints.</p>
<p>However, <code>isd</code> is primarily a wrapper around <code>systemctl</code> and <code>systemctl edit</code>
is just an odd ü¶Ü.
To better understand why, here is a snippet from the <code>systemctl edit</code> man page:</p>
<blockquote>
<p>Edit or replace a drop-in snippet or the main unit file, to extend or override the
  definition of the specified unit. [...]
  The editor [...] is invoked on temporary files which
  will be written to the real location if the editor exits successfully.
  After the editing is finished, configuration is reloaded [...].</p>
</blockquote>
<p>So in essence, <code>systemctl edit</code> creates a temporary file, opens an editor,
<em>creates/writes</em> a unit/drop-in file, and reloads the configuration.</p>
<p><em>My</em> main issue is that by <em>creating</em> a drop-in file of a <code>system</code> unit,
the <code>systemctl edit</code> command <em>always</em> has to run with elevated privileges, often
by prefixing it with <code>sudo</code>.
Otherwise, the command does not have the necessary privileges to create the
drop-in file. This behavior is also correct and important! No unprivileged users should
be able to edit the drop-in files of <code>system</code> units.
But this means that <code>systemctl edit</code> <em>cannot</em> rely on <code>polkit</code> rules to allow
unprivileged users to manage subsets of <code>system</code> units.
Although all other <code>systemctl</code> sub-commands can.</p>
<p>As a result, <code>isd</code> will always have a special case for <code>systemctl edit</code>,
since it has to switch back to prefixing commands with <code>sudo</code> even if
everything else <em>could</em> be managed with <code>polkit</code>.
Also, it takes control over the terminal and starts the editor on its own as <strong>root</strong>.
And this is where I disagree with the current implementation.</p>
<p>Opening <em>any</em> editor as <code>root</code> is, IMHO, not a good idea.
One annoyance is that many have user-specific configurations/plugins
that are not available if it is running as a different user.
The bigger issue is that I do not think we should trust all editors (especially
with large plugin ecosystems) to run with elevated privileges.
See, for example, the blog titled <a href="https://www.aquasec.com/blog/can-you-trust-your-vscode-extensions/">Can You Trust Your VSCode Extensions?</a>.</p>
<p>You may disagree with this opinion but the interesting thing
is that (as far as I understand it), the <code>systemd</code> folks have come
to a similar conclusion for pagers. 
For example, if you run <code>sudo PAGER=&lt;custom-pager&gt; systemctl show &lt;service-with-long-output&gt;</code>
where <code>PAGER != less</code> (for example, let the pager be <a href="https://github.com/walles/moar">moar</a>) you will, see that it
will <em>not</em> open the provided pager.
You must explicitly enable it via <code>sudo SYSTEMD_PAGERSECURE=1 PAGER=&lt;custom-pager&gt; systemctl show &lt;service-with-long-output&gt;</code>.
For details, see the <a href="https://www.freedesktop.org/software/systemd/man/latest/systemctl.html#%24SYSTEMD_PAGERSECURE">SYSTEMD_PAGERSECURE</a>
discussion. So I wonder if editor should be more trustworthy than pagers?</p>
<p>With this, I hope that I was able to communicate why I believe that <code>systemctl edit</code>
is an odd ü¶Ü.</p>
<details class="info">
<summary>Aside Note</summary>
<p>If you made it this far into the document, you need to know that you are an
absolute ü¶∏.</p>
<p>And I hope that you are not scared to use your editor.
And if you are, I bet it is not as scary as the reproductive organs of a ü¶Ü.</p>
</details>
<h3 id="systemctl-edit---stdin"><code>systemctl edit --stdin</code><a class="headerlink" href="#systemctl-edit---stdin" title="Permanent link">&para;</a></h3>
<p>For those that are closely following the release notes of <code>systemd</code>,
you may already be aware of <code>systemctl edit --stdin</code>:</p>
<blockquote>
<p>--stdin:
   When used with edit, the contents of the file will be read from standard input and the
   editor will not be launched. In this mode, the old contents of the file are completely
   replaced. This is useful to "edit" unit files from scripts:</p>
</blockquote>
<p>This already avoids opening an editor with elevated privileges and brings all
the other niceties of <code>systemctl edit</code> into a single command.
In a future version of <code>isd</code>, I plan on intercepting <code>systemctl edit</code> commands,
to open editors as the current user and then only use elevated privileges for
the other steps.</p>
<h2 id="pagers">Pagers<a class="headerlink" href="#pagers" title="Permanent link">&para;</a></h2>
<p>A pager is a program to display (not edit!) text on the terminal,
in a user friendly way<sup id="fnref:5"><a class="footnote-ref" href="#fn:5">5</a></sup>.</p>
<p>By default <code>systemd</code> will avoid running arbitrary pagers for <code>system</code> units.
To quote the man pages from <a href="https://www.freedesktop.org/software/systemd/man/latest/systemctl.html#%24SYSTEMD_PAGERSECURE"><code>SYSTEMD_PAGERSECURE</code></a>:</p>
<blockquote>
<p>When true, the "secure" mode of the pager is enabled; if false, disabled.
  If $SYSTEMD_PAGERSECURE is not set at all, secure mode is enabled if the effective UID is not the same as the
  owner of the login session. [...]
  In secure mode, <code>LESSSECURE=1</code> will be set when invoking the pager, and the pager shall disable commands
  that open or create new files or start new subprocesses.
  When <code>SYSTEMD_PAGERSECURE</code> is not set at all, pagers which are not known to implement secure mode will not be used.
  (Currently only <a href="https://man7.org/linux/man-pages/man1/less.1.html"><code>less(1)</code></a> implements secure mode.)</p>
</blockquote>
<p>Effectively meaning that by default <code>less</code> will be used as a pager for <code>system</code> units.
Although this might be an annoyance, the documentation expands on the motivation (emphasize mine):</p>
<blockquote>
<p>Note: when commands are invoked with elevated privileges,
  for example under <code>sudo</code> or <code>pkexec</code>, care must be taken to ensure that
  unintended interactive features are not enabled. [...]
  Setting <code>SYSTEMD_PAGERSECURE=0</code> or not removing it from the inherited environment
  allows the <strong>user to invoke arbitrary commands</strong>.
  Note that if the <code>SYSTEMD_PAGER</code> or <code>PAGER</code> variables are to be honoured,
  <code>SYSTEMD_PAGERSECURE</code> must be set too. </p>
</blockquote>
<p>Neat! So <code>systemd</code> tries to protect us from running <em>untrusted</em> pagers with elevated privileges and/or
accidentally running commands/sub-processes with elevated privileges from within the pager.
Something that they <em>do not</em> honour for <code>EDITOR</code>, see <a href="#issues-with-systemctl-edit">Issues with <code>systemctl edit</code></a>
for more details on this subject.</p>
<p>Okay, but how does <code>isd</code> work with pagers?
Currently, <code>isd</code> takes a rather simple approach for the pagers.
It simply uses the pager that is configured via the settings or uses the pager from the environment variables
<code>SYSTEMD_PAGER</code> or <code>PAGER</code>. In all instances, <code>isd</code> <em>ignores</em> the value of <code>SYSTEMD_PAGERSECURE</code>!</p>
<p>The simple reason why this is not an issue is that <code>isd</code> does <em>not</em> run the pager with elevated privileges.
Even if <code>isd</code> may prefix the <code>systemctl</code> call with <code>sudo</code>, the result (or text) is read from the standard output<sup id="fnref:6"><a class="footnote-ref" href="#fn:6">6</a></sup>
and then fed to a pager as a <em>new</em> sub-process. This pager process runs <em>without</em> elevated privileges and as such
does <em>not</em> require more trust than any other program. :)</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>And if you do, thank you <img alt="ü•π" class="twemoji" src="../assets/external/cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f979.svg" title=":face_holding_back_tears:">&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Where <code>systemctl edit</code> is an exception. See <a href="#issues-with-systemctl-edit">Issues with <code>systemctl edit</code></a> for more details.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>And especially <code>systemctl edit --runtime</code>!&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>With the exception of how <code>systemctl edit</code> trusts <code>$EDITOR</code>.&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p>For more details, see the <a href="https://en.wikipedia.org/wiki/Terminal_pager">Wikipedia</a> page.&#160;<a class="footnote-backref" href="#fnref:5" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p>Some initial data may be dropped while reading to improve the interactive features and avoid high memory usage.&#160;<a class="footnote-backref" href="#fnref:6" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
</ol>
</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 isd Project
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["search.suggest", "search.highlight", "navigation.sections", "toc.integrate", "content.code.annotate", "content.code.copy", "content.code.select"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../javascripts/asciinema-player.min.js"></script>
      
    
  </body>
</html>